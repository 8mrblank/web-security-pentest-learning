# Pass-01 Front End Bypass

## 0x00 Lab Overview 

This lab is maily about to bypass js code below, which is a white list.

## 0x01 Source Code

```js
function checkFile() {
    var file = document.getElementsByName('upload_file')[0].value;
    if (file == null || file == "") {
        alert("请选择要上传的文件!");
        return false;
    }
    //定义允许上传的文件类型
    var allow_ext = ".jpg|.png|.gif";
    //提取上传文件的类型
    var ext_name = file.substring(file.lastIndexOf("."));
    //判断上传文件类型是否允许上传
    if (allow_ext.indexOf(ext_name + "|") == -1) {
        var errMsg = "该文件不允许上传，请上传" + allow_ext + "类型的文件,当前文件类型为：" + ext_name;
        alert(errMsg);
        return false;
    }
}
```

## 0x02 Go Hack It

### Prepare a Webshell

Follow the instruction [here](../../image_webshell).

![](./test.jpg)

### Upload and Catch the Package

![](./imgs/pkg.jpg)

### Modify

Change extension to php, and forward the package.

```
Content-Disposition: form-data; name="upload_file"; filename="test.php"
```

### Uploaded

Successfully uploaded and can check here to see result.

![](./imgs/upload.jpg)
